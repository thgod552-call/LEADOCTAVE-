---
interface NavLink {
  label: string;
  href: string;
}

const links: NavLink[] = [
  { label: 'Home', href: '/' },
  { label: 'Service', href: '/service' },
  { label: 'Model', href: '/model' },
  { label: 'Founder', href: '/founder' },
  { label: 'About', href: '/about' },
  { label: 'Contact', href: '/contact' },
];
---

<nav class="fixed top-0 w-full bg-gradient-to-b from-[#0f1a27] via-[#0f1a27]/95 to-[#0f1a27]/90 z-50 shadow-2xl backdrop-blur-lg border-b border-[#d4af7d]/20">
  <div class="max-w-7xl mx-auto px-6 py-3.5 flex items-center justify-between">
    <!-- Logo -->
    <a href="/" class="flex items-center space-x-2.5 z-50 group no-underline hover:opacity-90 transition-opacity duration-300">
      <div class="relative w-10 h-10 flex items-center justify-center bg-gradient-to-br from-[#d4af7d] to-[#c49d6f] rounded-full shadow-lg group-hover:shadow-[#d4af7d]/50 transition-all duration-300">
        <div class="absolute inset-1 rounded-full border-2 border-white/30 group-hover:border-white/60 transition-all duration-300"></div>
        <div class="relative w-6 h-6">
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-full h-full">
            <circle cx="12" cy="12" r="10" stroke="white" stroke-width="1.5" opacity="0.8"/>
            <circle cx="12" cy="12" r="6" stroke="white" stroke-width="1.5" opacity="0.6"/>
            <circle cx="12" cy="12" r="2" fill="white" opacity="1"/>
          </svg>
        </div>
      </div>
      <div class="flex flex-col">
        <span class="text-lg font-bold text-white tracking-tight group-hover:text-[#d4af7d] transition-colors duration-300">
          LeadOctave
        </span>
        <span class="text-xs text-[#e0b890] tracking-widest uppercase font-semibold">Leadership Design</span>
      </div>
    </a>

    <!-- Navigation Links - Desktop -->
    <div class="hidden md:flex items-center space-x-1">
      {
        links.map((link) => (
          <a
            href={link.href}
            class="px-4 py-2 text-sm font-medium text-gray-300 hover:text-[#d4af7d] transition-all duration-300 relative group rounded-lg hover:bg-[#d4af7d]/5"
          >
            {link.label}
            <span class="absolute bottom-1.5 left-4 right-4 h-0.5 bg-gradient-to-r from-[#d4af7d] to-transparent scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left"></span>
          </a>
        ))
      }
    </div>

    <!-- CTA Button + Mobile Menu Toggle -->
    <div class="flex items-center space-x-4">
      <a href="/contact" class="hidden md:inline-block px-6 py-2.5 bg-gradient-to-r from-[#d4af7d] to-[#c49d6f] hover:from-[#c49d6f] hover:to-[#b48a5f] text-black font-bold rounded-lg transition-all duration-300 text-sm shadow-lg hover:shadow-xl hover:shadow-[#d4af7d]/40 transform hover:scale-105 border border-[#e0b890]">
        Diagnostic
      </a>

      <!-- Hamburger Menu - Mobile -->
      <button id="nav-toggle" class="md:hidden w-10 h-10 flex flex-col items-center justify-center gap-1.5 cursor-pointer relative z-50 p-2 rounded-lg hover:bg-[#d4af7d]/10 transition-colors">
        <span class="nav-bar w-5 h-0.5 bg-[#d4af7d] rounded-full transition-all duration-300"></span>
        <span class="nav-bar w-5 h-0.5 bg-[#d4af7d] rounded-full transition-all duration-300"></span>
        <span class="nav-bar w-5 h-0.5 bg-[#d4af7d] rounded-full transition-all duration-300"></span>
      </button>
    </div>
  </div>

  <!-- Mobile Menu -->
  <div id="nav-menu" class="hidden md:hidden fixed left-0 right-0 top-[60px] bg-gradient-to-b from-[#0f1a27] to-[#0f1a27]/95 border-b border-[#d4af7d]/10 z-40 shadow-lg">
    <div class="px-6 py-8 space-y-2 flex flex-col">
      {
        links.map((link) => (
          <a
            href={link.href}
            class="px-4 py-3 text-base font-medium text-gray-300 hover:text-[#d4af7d] hover:bg-[#d4af7d]/5 transition-all duration-300 rounded-lg border-l-2 border-transparent hover:border-[#d4af7d]/60"
          >
            {link.label}
          </a>
        ))
      }
      <div class="pt-6 border-t border-[#d4af7d]/10">
        <a href="/contact" class="block w-full px-4 py-3 bg-gradient-to-r from-[#d4af7d] to-[#c49d6f] hover:from-[#c49d6f] hover:to-[#b48a5f] text-black font-bold rounded-lg transition-all duration-300 shadow-lg hover:shadow-[#d4af7d]/40 text-center">
          Take Diagnostic
        </a>
      </div>
    </div>
  </div>
</nav>

<style>
  nav {
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
  }

  #nav-toggle.open .nav-bar:nth-child(1) {
    transform: rotate(45deg) translate(9px, 9px);
  }

  #nav-toggle.open .nav-bar:nth-child(2) {
    opacity: 0;
  }

  #nav-toggle.open .nav-bar:nth-child(3) {
    transform: rotate(-45deg) translate(7px, -7px);
  }

  .nav-bar {
    display: block;
  }
</style>

<script>
  function initNav() {
    const navToggle = document.getElementById('nav-toggle');
    const navMenu = document.getElementById('nav-menu');
    const navLinks = navMenu?.querySelectorAll('a');

    if (navToggle && navMenu) {
      // Toggle menu
      navToggle.addEventListener('click', (e) => {
        e.stopPropagation();
        navToggle.classList.toggle('open');
        navMenu.classList.toggle('hidden');
      });

      // Close menu when clicking links
      navLinks?.forEach(link => {
        link.addEventListener('click', () => {
          navToggle.classList.remove('open');
          navMenu.classList.add('hidden');
        });
      });

      // Close menu when clicking outside
      document.addEventListener('click', (e) => {
        if (!navToggle.contains(e.target) && !navMenu.contains(e.target)) {
          if (!navMenu.classList.contains('hidden')) {
            navToggle.classList.remove('open');
            navMenu.classList.add('hidden');
          }
        }
      });

      // Close menu on escape
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
          navToggle.classList.remove('open');
          navMenu.classList.add('hidden');
        }
      });
    }
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initNav);
  } else {
    initNav();
  }

  // Re-init on page transitions (for client-side routing)
  document.addEventListener('astro:page-load', initNav);
</script>
